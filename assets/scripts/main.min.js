function setting(e){$("#setting").toggleClass("rotate"),$("#setting").toggleClass("rotate-back"),$("#user-info").css("display","none"),$("#note").css("display","none"),$("#event").css("display","none"),$("#setting-bar").slideToggle()}function fade(){$("#event").css("display","none"),$("#setting-bar").css("display","none"),$("#note").css("display","none"),$("#user-info").fadeToggle()}function searching(){$("#search").toggleClass("flag"),$("#search").hasClass("flag")?($("#search").removeClass("hide"),$("#search").delay(10).animate({width:"100%"}),$("#search").focus()):($("#search").animate({width:"0%"}),setTimeout(function(){$("#search").addClass("hide")},300),$("#search").val(""),$(".searchResult").css("display","none"))}function hidding(e){$("#"+e).css("display","none")}function display(e){$("#"+e).fadeToggle()}function showing(){$("#chat").toggleClass("hide")}function mail(){$("#mail").toggleClass("hide")}function transform3d(){$("#aris-logo").addClass("transform3d")}function deleteTransform(){$("#aris-logo").removeClass("transform3d")}function table(){$(".fc-time-grid .fc-event-container").css("display","inline-block")}function checkCookie(){var e=navigator.cookieEnabled;return e||(document.cookie="testcookie",e=document.cookie.indexOf("testcookie")!=-1),e||showCookieFail()}function appleCheck(){is_iPad&&screen.orientation.lock("landscape")}function showCookieFail(){alert("برای کاربری مناسب کوکی سیستم خود را روشن کنید")}void 0==localStorage.accessToken&&(window.location.href="login.html"),setInterval(function(){void 0==localStorage.accessToken&&(window.location.href="login.html")},500);var app=angular.module("myApp",["angular.filter"]);app.directive("aris",function(){return{scope:!0,restrict:"AE",replace:"true",template:'<ng-include src="template"/>',link:function(e,t,a){e.$watch(function(){e.template="modules/"+e.number})}}}),app.directive("sidebar",function(){return{scope:!0,restrict:"AE",replace:"true",template:'<ng-include src="template1"/>',link:function(e,t,a){e.$watch(function(){e.template1="modules/"+e.side})}}}),app.controller("myCtrl",["$scope","$http","$timeout","$filter","$interval","$compile","$window",function(e,t,o,n,i,r,s){function l(t){if(0!=$(".searchLink").length&&(e.listItems=$(".searchLink")),t=t||window.event,"38"==t.keyCode)c<1?(m=Math.floor(e.listItems.length/5),$(".searchResult").animate({scrollTop:300*m},"fast"),c=e.listItems.length-1):(c--,c%4==0&&(c-4<1?($(".searchResult").animate({scrollTop:0},"slow"),m=1):(m--,$(".searchResult").animate({scrollTop:300*m},"slow"))));else if("40"==t.keyCode)c>e.listItems.length-2?(c=0,m=1,$(".searchResult").animate({scrollTop:0},"fast")):(c++,c%5==0&&0!=c&&($(".searchResult").animate({scrollTop:300*m},"slow"),m++));else if("37"==t.keyCode)console.log("left");else if("39"==t.keyCode)console.log("right");else if("13"==t.keyCode)for(var a=0;a<e.listItems.length;a++)if($(e.listItems[a]).hasClass("selected"))if($(e.listItems[a]).hasClass("child")){var o=$(e.listItems[a]).attr("value"),n=$(e.listItems[a]).attr("name");e.searchClick(o,n)}else{var o=$(e.listItems[a]).attr("value");e.gettingSystem(o,1)}$(".searchLink").removeClass("selected"),$(e.listItems[c]).addClass("selected")}e.logout=function(){window.localStorage.removeItem("accessToken"),window.location.href="login.html"},fetch("data/document.json").then(function(e){return e.json()}).then(function(t){var a=0,o=0;e.document=t.document;for(var n=0;n<e.document.length;n++)a+=e.document[n].debt,o+=e.document[n].credit,e.document[n].credit=e.numberFormat(e.document[n].credit.toString())+"/"+e.float(e.document[n].credit),e.document[n].debt=e.numberFormat(e.document[n].debt.toString())+"/"+e.float(e.document[n].debt);$("#documentDebt").html(e.numberFormat(a.toString())+"/"+e.float(a)),$("#documentCredit").html(e.numberFormat(o.toString())+"/"+e.float(o))}),e.number="unload.html",e.limitedNote=[],e.reading=0,t.get("data/error.json").then(function(t){e.error=t.data.error}),e.calendarsubmit=function(t,a,o){e.calendar={title:o,start:$("#start1").val(),end:$("#finish1").val()},e.events.push(e.calendar)},t.get("data/cartable.json").then(function(t){e.cartable=t.data.cartable;for(var a=0;a<e.cartable.length;a++)0==e.cartable[a].read?e.reading=e.reading+1:$("check"+e.cartable[a].id).removeClass("hide");0==e.reading&&$(".badge").css("opacity","0")}),e.headerSlide=function(t,a,o,n){0==o.length?e.table(n):$("#"+t).slideToggle(),$("#nav").html(a),$("#subnav").html("")},e.showContext=function(t,a,o,n){$("#my-title").html(t),$("#my-context").html(a),e.titleShow=!0,0==e.cartable[o].read&&(e.reading=e.reading-1,0==e.reading&&$(".badge").css("opacity","0")),e.cartable[o].read=1},e.closingSearch=function(){$("#search").hasClass("flag")||(e.searchSystem=[])},e.searching=function(t){$("#search").val()?(e.searchSystem=e.system,$(".searchResult").css("display","block"),e.searchItem=$("#search").val()):(e.searchSystem=[],c=0)},document.onkeydown=l;var c=0,m=1;e.checkingP=function(){$(".searchResult").css("overflow-y","scroll"),e.listItems=$(".searchLink"),e.testing=$(".testing"),$(e.listItems[0]).addClass("selected"),e.font()},e.cookieForSide=function(e,t){var a=new Date,o=a.getTime();o+=36e5,a.setTime(o);var n=e,i=t;document.cookie="searchParent = "+n+";expires="+a.toUTCString()+";path =/",document.cookie="searchId = "+i+";expires="+a.toUTCString()+";path =/"},e.searchClick=function(t,a){e.cookieForSide(t,a);for(var o=0;o<e.system.length;o++)for(var n=0;n<e.system[o].children.length;n++)if(e.system[o].children[n].id==t)var i=e.system[o].id;e.gettingSystem(i,0)},e.getSearchCookie=function(){var t=e.getCookieValue("searchParent"),a=e.getCookieValue("searchId");e.subsystem=e.getCookieValue("SubSystem")?JSON.parse(e.getCookieValue("SubSystem")):[],0!=t&&0!=a&&e.subSystem(t,a)};var u,h;t.get("data/note.json").then(function(t){e.note=t.data.note,e.message=t.data.message,e.alarm=t.data.alarm,e.sliderAlarm=e.alarm[0],h=e.alarm.length,e.carousel()});var f=0;e.carousel=function(){f>e.alarm.length-1?(f=0,e.sliderAlarm=e.alarm[f]):f<0?(f=e.alarm.length-1,e.sliderAlarm=e.alarm[f]):e.sliderAlarm=e.alarm[f],f+=1,u=setTimeout(function(){e.carousel()},6e3)},e.slider=function(t){t==-1&&(f-=2),clearTimeout(u),e.carousel(),$(".play").addClass("hide"),$(".pause").removeClass("hide")},e.pause=function(){clearTimeout(u),$(".pause").addClass("hide"),$(".play").removeClass("hide")},e.play=function(){e.carousel(),$(".play").addClass("hide"),$(".pause").removeClass("hide")},fetch("data/system.json").then(function(e){return e.json()}).then(function(t){e.system=t.system}),e.getCookieValue=function(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""},e.delete=function(){$("#select").is(":checked")?e.cartable=[]:$(".cartable-input").each(function(t){if(1==this.checked)for(var a=this.value,o=0;o<e.cartable.length;o++)a==e.cartable[o].id&&e.cartable.splice(t,1)})},e.subSystem=function(t,a,o){var n=new Date,i=n.getTime();i+=36e5,n.setTime(i);var r=[];e.systemslider=[];for(var s=0;s<e.subsystem.length;s++)if(e.subsystem[s].id==t){for(var l=0;l<e.subsystem[s].children.length;l++)e.subsystem[s].children[l].id==a&&e.systemslider.push(e.subsystem[s].children[l]);$("#nav").html(e.subsystem[s].title);var r=JSON.stringify(e.subsystem);$(".subsystem").slideUp(),document.cookie="SubSystem = "+r+";expires="+n.toUTCString()+";path =/"}},e.inboxing=function(){1==$("#select").prop("checked")?$(".modal_input").prop("checked",!0):$(".modal_input").prop("checked",!1)},e.gettingSystem=function(t,a){1==a&&e.cookieForSide(0,0);var o=new Date,n=o.getTime();n+=36e5,o.setTime(n);for(var i=0;i<e.system.length;i++)if(e.system[i].id==t){var r=JSON.stringify(e.system[i].children);document.cookie="SubSystem = "+r+";expires="+o.toUTCString()+";path =/"}window.location.href="system-page.min.html"},e.topLinking=function(t,a){if("system-page.min.html"==a)e.gettingSystem(t,1);else{var o=window.open(a,"_blank");o.focus()}},e.addThis=function(t,a){var o={title:"",id:"",content:""};o.title=a,o.content=t,o.id="mynote"+e.limitedNote.length+1,$("#notetitle").val(""),$("#notearea").val(""),e.note.push(o)},e.removeItem=function(t,a){1==t?e.message.splice(a,1):2==t&&e.note.splice(a,1)},e.radio=function(t){e.numberType[0]=t},e.tabledata=[],e.dataLoad=function(a){e.loading=!0,e.paginationNumber=[],e.limitedEdition=[],e.dataToSend=[],void 0==a[0]&&(e.error[0]="فرم نمیتواند خالی باشد",$("#error").modal());for(var o=0;o<a.length;o++)e.dataToSend.push(a[o]);e.dataToSend.push($("#pdp").val()),e.dataToSend.push($("#pdp1").val()),t.get("data/table.json").then(function(t){e.loading=!1,e.tabledata=t.data.table;for(var a=0;a<e.tabledata.length;a++)2==e.numberType[0]?(e.tabledata[a].credit=e.tabledata[a].credit/1e3,e.tabledata[a].debt=e.tabledata[a].debt/1e3):3==e.numberType[0]&&(e.tabledata[a].credit=e.tabledata[a].credit/1e6,e.tabledata[a].debt=e.tabledata[a].debt/1e6),void 0!=e.tabledata[a].credit&&void 0!=e.tabledata[a].debt&&(Number(e.tabledata[a].credit)>Number(e.tabledata[a].debt)?(e.tabledata[a].remain=Number(e.tabledata[a].credit)-Number(e.tabledata[a].debt),e.tabledata[a].situation="بستانکار"):Number(e.tabledata[a].credit)<Number(e.tabledata[a].debt)?(e.tabledata[a].remain=Number(e.tabledata[a].debt)-Number(e.tabledata[a].credit),e.tabledata[a].situation="بدهکار"):(e.tabledata[a].remain=Number(e.tabledata[a].debt)-Number(e.tabledata[a].credit),e.tabledata[a].situation="-"));e.pagination(1);var o;o=Math.ceil(e.tabledata.length/15);for(var n=1;n<o+1;n++)e.paginationNumber.push(n)}).catch(function(){e.error[0]="عدم دستیابی به اطلاعات",$("#error").modal()}),setTimeout(function(){e.tableFonting()},10)},e.float=function(e){return(e-Math.floor(e)).toFixed(2).toString().substring(2)},e.pagination=function(t){var a=0,n=0,i=0;$(".pagination li").removeClass("active"),$("#pagination"+t).addClass("active"),e.limitedEdition=[];var r=15*(t-1);if(r+15<e.tabledata.length){for(var s=0;s<r+15;s++)void 0!=e.tabledata[s].credit&&void 0!=e.tabledata[s].debt&&(a+=e.tabledata[s].credit,n+=e.tabledata[s].debt,e.tabledata[s].decimal=(e.tabledata[s].credit-Math.floor(e.tabledata[s].credit)).toFixed(2));for(var l=0;l<15;l++)e.limitedEdition[l]=e.tabledata[r+l]}else{for(var s=0;s<e.tabledata.length;s++)void 0!=e.tabledata[s].credit&&void 0!=e.tabledata[s].debt&&(a+=e.tabledata[s].credit,n+=e.tabledata[s].debt,e.tabledata[s].decimal=(e.tabledata[s].credit-Math.floor(e.tabledata[s].credit)).toFixed(2));for(var l=0;l<e.tabledata.length-r;l++)e.limitedEdition[l]=e.tabledata[r+l]}o(function(){for(var t=0;t<e.limitedEdition.length;t++)void 0!=e.limitedEdition[t].credit&&void 0!=e.limitedEdition[t].debt&&(e.limitedEdition[t].decimal=(e.limitedEdition[t].credit-Math.floor(e.limitedEdition[t].credit)).toFixed(2),0!=(e.limitedEdition[t].credit-Math.floor(e.limitedEdition[t].credit)).toFixed(2)?$("#credit"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].credit.toString())+"/"+e.float(e.limitedEdition[t].credit)):$("#credit"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].credit.toString())),0!=(e.limitedEdition[t].debt-Math.floor(e.limitedEdition[t].debt)).toFixed(2)?$("#debt"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].debt.toString())+"/"+e.float(e.limitedEdition[t].debt)):$("#debt"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].debt.toString())),0!=(e.limitedEdition[t].remain-Math.floor(e.limitedEdition[t].remain)).toFixed(2)?$("#remain"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].remain.toString())+"/"+e.float(e.limitedEdition[t].remain)):$("#remain"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].remain.toString())),"بستانکار"==e.limitedEdition[t].situation||"-"==e.limitedEdition[t].situation?$("#remain"+e.limitedEdition[t].id).addClass("green"):$("#remain"+e.limitedEdition[t].id).addClass("red"));e.font()},0),a>n?($("#totalSituation").html("بستانکار"),i=a-n,$("#totalSum").addClass("green")):($("#totalSituation").html("بدهکار"),i=n-a,$("#totalSum").addClass("red")),a=e.numberFormat(a.toString())+"/"+e.float(a),n=e.numberFormat(n.toString())+"/"+e.float(n),i=e.numberFormat(i.toString())+"/"+e.float(i),$("#creditSum").html(a),$("#debtSum").html(n),$("#totalSum").html(i),setTimeout(function(){e.tableFonting()},10)},e.numberFormat=function(e){var t=",",a=e.split(".",2),o=a,n=parseInt(a[0]);if(isNaN(n))return"";var i="";n<0&&(i="-"),n=Math.abs(n);for(var r=new String(n),a=[];r.length>3;){var s=r.substr(r.length-3);a.unshift(s),r=r.substr(0,r.length-3)}return r.length>0&&a.unshift(r),r=a.join(t),e=o.length<1?r:r,e=i+e};var g=0;e.checking=function(a){if(46===a.which&&(t.get("data/modal.json").then(function(t){e.first=t.data.first}).catch(function(){e.error[0]="عدم برقراری ارتباطات مجددا سعی کنید",$("#error").modal()}),$("#myModal").modal("toggle")),43===a.which){if(0==g)return t.get("data/modal.json").then(function(t){e.first=t.data.second}).catch(function(){e.error[0]="عدم برقراری ارتباطات مجددا سعی کنید",$("#error").modal()}),void(g+=1);1==g&&(t.get("data/modal.json").then(function(t){e.first=t.data.third}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),g+=1)}if(45==a.which){if(1==g)return t.get("data/modal.json").then(function(t){e.first=t.data.first}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),void(g-=1);if(2==g)return t.get("data/modal.json").then(function(t){e.first=t.data.second}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),void(g-=1)}},e.eventNumber=0,t.get("data/buttonTest.json").then(function(t){e.buttons=t.data.buttons}),e.genral=function(t){switch(t){case 12:var a=$("#firstInput").val();e.dataLoad(a,1,1,1,1);break;case 13:console.log("second function");break;case 14:console.log("third function");break;case 15:console.log("forth function");break;default:console.log("no function fund")}},t.get("data/events.json").success(function(t){e.events=t;for(var a=new Date,o=a.getMonth()+1,n=a.getDate(),i=a.getFullYear(),r=(i+"/"+o+"/"+n).toString(),s=0;s<e.events.length;s++)e.events[s].start==r&&(e.eventNumber+=1)}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),e.list_slide=function(t,a,o,n){e.tabledata=[],$("#creditSum").html(""),$("#debtSum").html(""),$("#totalSum").html(""),$("#totalSituation").html(""),$("#"+a).toggleClass("flag"),0!=o.length&&void 0!=o?($("#"+a).slideToggle(),$("#"+a).hasClass("flag")?$("#subnav").append("<i class='fa fa-angle-left'></i>"+t):$("#subnav").html(" ")):($("#"+a).removeClass("flag"),$("#subnav").append("<i class='fa fa-angle-left'></i>"+t),e.table(n))},e.table=function(a){e.number="example"+a+".html",t.get("data/table1.json").then(function(t){e.tabledata=t.data.table}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()})},i(function(){return t.get("data/chat.json").then(function(t){e.chat=t.data.message}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()})},5e3),e.orderBy=function(t){e.myorder=t},e.drop=function(e){$("#dropdown"+e).slideToggle(),$("#subnav").html("")},e.chatting=function(t){e.newChat={sender:" ",content:"",type:"",reciver:""},void 0==t&&alert("برای آغاز گفتگو یک فرد را باید انتخاب کنید"),e.newChat.content=$("#chattext").val(),e.newChat.reciver=t,e.newChat.type="send",e.chat.push(e.newChat),$("#chattext").val(""),setTimeout(function(){$("#chatarea").scrollTop=$("#chatarea").scrollHeight},100)},t.get("data/theme.json").then(function(t){e.colorTheme=t.data.color,e.fontTheme=t.data.font,e.tableFont=t.data.tableFont,e.numberType=t.data.numberType,e.time=t.data.screensaver,setTimeout(function(){e.theme(),e.font()},200);var a;console.log(e.time),$(document).on("mousemove keydown click",function(){$(".loading-login").fadeOut(1e3),clearTimeout(a),a=setTimeout(function(){$(".loading-login").fadeIn(2e3)},60*e.time)}).click()}).catch(function(){e.error[0]="خطا در برقراری ارتباطات",$("#error").modal()}),e.tablefontChange=function(t){e.tableFont[0]=$("#points-font").val(),e.tableFonting()},e.fontChanger=function(t){e.fontTheme=t,e.font()},e.screen=function(t){switch(t){case"یک دقیقه":e.time=1e3;break;case"دو دقیقه":e.time=2e3;break;case"سه دقیقه":e.time=3e3}},e.colorChanger=function(t){$(".color-icon").css("display","none"),$("#color"+t).css("display","inline-block"),e.colorTheme=t,e.theme()},e.tableFonting=function(){$("table").find(".table-number").css("font-size",e.tableFont[0]+"px")},e.theme=function(){"hi"==localStorage.accessToken&&window.localStorage.removeItem("accessToken"),$("#color"+e.colorTheme[0]).css("display","inline-block"),1==e.colorTheme[0]?($(".color").removeClass("second-color"),$(".color").removeClass("third-color"),$(".color").addClass("first-color"),$(".mycalendar").removeClass("calendar-second-color"),$(".mycalendar").removeClass("calendar-third-color"),$(".mycalendar").addClass("calendar-first-color"),$(".top-link").css("color","5BB0E2"),$("button").css("background","#5BB0E2"),$("#user-message").css("background-color","5BB0E2"),$("footer").css("background-color","#5BB0E2"),$(".system-li>h4").css("background-color","#5BB0E2"),$(".pagination > .active > a ").css("background-color","5BB0E2")):2==e.colorTheme[0]?($(".color").removeClass("first-color"),$(".color").removeClass("third-color"),$(".color").addClass("second-color"),$(".mycalendar").removeClass("calendar-first-color"),$(".mycalendar").removeClass("calendar-third-color"),$(".mycalendar").addClass("calendar-second-color"),$(".top-link").css("color","#3eb65c"),$("button").css("background-color","#3eb65c"),$("#user-message").css("background-color","#67cb80"),$("footer").css("background-color","#67cb80"),$(".system-li>h4").css("background-color","#67cb80"),$(".pagination > .active > a ").css("background-color","#3eb65c")):($(".color").removeClass("second-color"),$(".color").removeClass("first-color"),$(".color").addClass("third-color"),$(".mycalendar").removeClass("calendar-second-color"),$(".mycalendar").removeClass("calendar-first-color"),$(".mycalendar").addClass("calendar-third-color"),$(".top-link").css("color","#b194f1"),$("#user-message").css("background-color","#cebbf6"),$("button").css("background-color","#b194f1"),$("footer").css("background-color","#cebbf6"),$(".system-li>h4").css("background-color","#cebbf6"),$(".pagination > .active > a ").css("background-color","#b194f1"))},e.font=function(){$(".theme-check").addClass("hide"),$(".fa-pencil").removeClass("hide"),1==e.fontTheme[0]?($("#first").addClass("hide"),$("#firstcheck").removeClass("hide"),$(".fontchange").css("font-family","far"),$("label").css("font-family","far"),$("button").css("font-family","far"),$("th").css("font-family","far")):2==e.fontTheme[0]?($("#second").addClass("hide"),$("#secondcheck").removeClass("hide"),$(".fontchange").css("font-family","iran-sans"),$("label").css("font-family","iran-sans"),$("button").css("font-family","iran-sans"),$("th").css("font-family","iran-sans"),$(".top-link").css("font-size","15px"),$(".sub-system p").css("font-size","15px")):($("#third").addClass("hide"),$("#thirdcheck").removeClass("hide"),$(".fontchange").css("font-family","dubai"),$("label").css("font-family","dubai"),$("button").css("font-family","dubai"),$("th").css("font-family","dubai"),$("th").css("font-size","14px"),$(".top-link").css("font-size","13px"),$(".sub-system p").css("font-size","13px"))},e.sideBar=function(t){e.sidecontainer(t),$(".side-tool").animate({width:"400px"},"slow"),$(".side-filter").animate({width:"400px"},"slow"),$(".container-filter a").css("pointer-events","none"),$("nav a").css("pointer-events","none"),$("nav i").css("pointer-events","none")},e.mainSystem=function(){$("#mainSystems").modal()},e.sidecontainer=function(a){if(1==a&&(t.get("data/note.json").then(function(t){e.note=t.data.note,e.message=t.data.message,e.alarm=t.data.alarm;for(var a=0;a<3;a++)e.limitedNote.push(e.note[a])}),e.side="note2.html"),2==a){var o;t.get("data/events.json").then(function(e){$('[data-toggle="tooltip"]').tooltip(),o=e}),e.side="calendar2.html"}3==a&&(t.get("data/link.json").then(function(t){e.link=t.data.link}),e.side="link.html")},e.sideBarClose=function(){$(".side-tool").animate({width:"0px"}),$(".side-filter").animate({width:"0px"}),$(".container-filter a").css("pointer-events",""),$("nav a").css("pointer-events",""),$("nav i").css("pointer-events",""),$(".effect").css("filter","none")},e.mydate=function(){switch(week=new Array("يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه","شنبه"),months=new Array("فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دي","بهمن","اسفند"),a=new Date,d=a.getDay(),day=a.getDate(),month=a.getMonth()+1,year=a.getYear(),year=0==year?2e3:year,!(year<1e3)||(year+=1900),year-=month<3||3==month&&day<21?622:621,month){case 1:day<21?(month=10,day+=10):(month=11,day-=20);break;case 2:day<20?(month=11,day+=11):(month=12,day-=19);break;case 3:day<21?(month=12,day+=9):(month=1,day-=20);break;case 4:day<21?(month=1,day+=11):(month=2,day-=20);break;case 5:case 6:day<22?(month-=3,day+=10):(month-=2,day-=21);break;case 7:case 8:case 9:day<23?(month-=3,day+=9):(month-=2,day-=22);break;case 10:day<23?(month=7,day+=8):(month=8,day-=22);break;case 11:case 12:day<22?(month-=3,day+=9):(month-=2,day-=21)}day<10&&$(".myday").css("right","44%"),e.myday=day,e.myMonth=months[month-1],e.dayname=week[d]},e.mydate(),e.newMonth=function(t){12==month&&1==t?month=1:1==month&&t==-1?month=12:month+=t,e.myMonth=months[month-1]},e.treeToShow=[],e.gettingTree=function(){t.get("data/tree.json").then(function(t){e.tree=t.data.tree;for(var a=0;a<e.tree.length;a++)null==e.tree[a].parent&&e.treeToShow.push(e.tree[a])})},e.nodeSlide=function(t){$("#tree"+t).hasClass("flag")?$("#tree"+t).slideToggle():(e.creatingNode(t),$("#tree"+t).addClass("flag")),$("#treeIcon"+t).toggleClass("flag"),$("#treeIcon"+t).hasClass("flag")?($("#treeIcon"+t).removeClass("fa-angle-down"),$("#treeIcon"+t).addClass("fa-angle-up")):($("#treeIcon"+t).removeClass("fa-angle-up"),$("#treeIcon"+t).addClass("fa-angle-down"))},e.creatingNode=function(t){$("#tree"+t).html("");for(var a=0;a<e.tree.length;a++)e.tree[a].parent==t&&$("#tree"+t).append(r("<div class='tree-view' ><span class='tree-span fontchange' id='treeRow"+e.tree[a].id+"' ng-click='selectingTree("+e.tree[a].id+")'>"+e.tree[a].name+"</span><input type='checkbox' style='display:none'><i class='fa fa-angle-down' id='treeIcon"+e.tree[a].id+"' ng-click='nodeSlide("+e.tree[a].id+")'></i><div id='tree"+e.tree[a].id+"'></div></div><div class='clearfix'></div>")(e))};var b=0,p=0;e.treeToEdit=[],e.selectingTree=function(t){for(var a=0,o=0;o<e.tree.length;o++)if($("#treeRow"+e.tree[o].id).hasClass("treeBackground")){a+=1;var n=e.tree[o].id}if($(".editingTree").is(":visible")&&0!=a){if(t==n)$("#treeRow"+t).toggleClass("treeBackground");else if($("#treeRow"+t).toggleClass("redNode"),$("#treeRow"+t).hasClass("redNode")){$(".tree-span").removeClass("redNode"),$("#treeRow"+t).addClass("redNode"),p=t;for(var o=0;o<e.tree.length;o++)e.tree[o].id==t&&($(".my-option").prop("selected",!1),$("#option"+e.tree[o].id).prop("selected",!0))}}else if($(".tree-span").removeClass("redNode"),$("#treeRow"+t).toggleClass("treeBackground"),$("#treeRow"+t).hasClass("treeBackground")){$(".tree-span").removeClass("treeBackground"),$("#treeRow"+t).addClass("treeBackground"),b=t;for(var o=0;o<e.tree.length;o++)e.tree[o].id==t&&(e.treeToEdit=[],e.treeToEdit.push(e.tree[o]),$("#treeCode").val(e.tree[o].code),$("#treeName").val(e.tree[o].name),$(".my-option").prop("selected",!1),$("#option"+e.tree[o].parent).prop("selected",!0),$("#plus"+e.tree[o].id).prop("selected",!0),$(".editAlarm").html(" "))}else $(".tree-span").removeClass("treeBackground"),e.treeToEdit=[],$(".editAlarm").html("برای انجام ویرایش ابتدا یک شاخه را انتخاب کنید"),$("#treeCode").val(""),$("#treeName").val("")},e.deletingNode=function(){var t=0;if(0==e.treeToEdit.length)e.error[0]="ابتدا شاخه ایی را انتخاب کنید",$("#error").modal();else{for(var a=0;a<e.tree.length;a++)e.tree[a].parent==e.treeToEdit[0].id&&(t+=1);if(0==t)for(var a=0;a<e.tree.length;a++)e.tree[a].id==e.treeToEdit[0].id&&($("#treeRow"+e.treeToEdit[0].id).remove(),$("#tree"+e.treeToEdit[0].id).remove(),$("#treeIcon"+e.treeToEdit[0].id).removeClass("fa-angle-down"),$("#treeIcon"+e.treeToEdit[0].id).removeClass("fa-angle-up"),e.tree.splice(a,1));else e.error[0]="شما نمیتوانید سرشاخه را حذف کنید",$("#error").modal()}},e.editingNode=function(){$(".tree-span").removeClass("treeBackground"),$(".tree-span").removeClass("redNode"),0==e.treeToEdit.length&&$(".editAlarm").html("برای انجام ویرایش ابتدا یک شاخه را انتخاب کنید"),$(".plusNode").css("display","none"),$(".plusNode").removeClass("flag"),$(".editingTree").toggleClass("flag"),$(".editingTree").hasClass("flag")?$(".editingTree").css("display","inline-block"):$(".editingTree").css("display","none")},e.addingNode=function(){$(".editingTree").css("display","none"),$(".editingTree").removeClass("flag"),$(".plusNode").toggleClass("flag"),$(".plusNode").hasClass("flag")?$(".plusNode").css("display","inline-block"):$(".plusNode").css("display","none")},e.editRegister=function(){if(console.log($("#tree"+b).find($("#treeRow"+p)).length),$("#tree"+b).find($("#treeRow"+p)).length>0)e.error[0]="ابتدا زیر شاخه را به سطح بالاتر انتقال دهید",$("#error").modal();else{for(var t=0;t<e.tree.length;t++)if(e.tree[t].id==e.treeToEdit[0].id){e.tree[t].code=$("#treeCode").val(),e.tree[t].name=$("#treeName").val();var a=e.tree[t].parent;void 0!=$("#parent").val()&&(e.tree[t].parent=$("#parent").val(),e.creatingNode($("#parent").val())),void 0!=$("#location").val()&&(e.tree[t].location=$("#location").val())}e.creatingNode(a),e.editingNode(),e.nodeSlide(a),e.nodeSlide($("#parent").val())}},e.addingRegister=function(t,a,o,n){if(void 0==t||void 0==a||void 0==n)e.error[0]="پر کردن همه فیلد ها الزامی است",$("#error").modal();else{var i={name:a,code:t,parent:$("#plusBranch").val(),id:t};e.tree.push(i),e.creatingNode($("#plusBranch").val()),$("#tree"+$("#plusBranch").val()).hasClass("flag")||e.nodeSlide($("#plusBranch").val())}$(".tree-span").removeClass("treeBackground"),$(".plus-form").val("")}}]),table();var is_iPad=null!=navigator.userAgent.match(/iPad/i);appleCheck(),checkCookie(),window.onkeydown=function(e){e=e||window.event,45==e.keyCode&&searching()};