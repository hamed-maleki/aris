function setting(e){$("#setting").toggleClass("rotate"),$("#setting").toggleClass("rotate-back"),$("#user-info").css("display","none"),$("#note").css("display","none"),$("#event").css("display","none"),$("#setting-bar").slideToggle()}function fade(){$("#event").css("display","none"),$("#setting-bar").css("display","none"),$("#note").css("display","none"),$("#user-info").fadeToggle()}function searching(){$("#search").toggleClass("flag"),$("#search").hasClass("flag")?($("#search").removeClass("hide"),$("#search").delay(10).animate({width:"100%"}),$("#search").focus()):($("#search").animate({width:"0%"}),setTimeout(function(){$("#search").addClass("hide")},300),$("#search").val(""),$(".searchResult").css({display:"none","background-color":"#f1f2f3"}))}function hidding(e){$("#"+e).css("display","none")}function display(e){$("#"+e).fadeToggle()}function showing(){$("#chat").toggleClass("hide")}function mail(){$("#mail").toggleClass("hide")}function transform3d(){$("#aris-logo").addClass("transform3d")}function deleteTransform(){$("#aris-logo").removeClass("transform3d")}function table(){$(".fc-time-grid .fc-event-container").css("display","inline-block")}function appleCheck(){is_iPad&&screen.orientation.lock("landscape")}function move(){"use strict";function e(){a>=100?(clearInterval(i),$("#loadingImage").addClass("rotate"),$("#myBar").delay(500).animate({top:"-20%"}),$("#myBar").delay(1e3).fadeOut()):(a++,t.style.height=a+"%",t.style.top=100-a+"%")}$("#myBar").css("top","20%"),$("#loadingImage").removeClass("rotate"),$("#myBar").fadeIn();var t=document.getElementById("inside-progress"),a=1,i=setInterval(e,20)}void 0==localStorage.accessToken&&(window.location.href="login.html"),setInterval(function(){void 0==localStorage.accessToken&&(window.location.href="login.html")},500);var app=angular.module("myApp",["angular.filter","ngDraggable"]);app.directive("sidebar",function(){return{scope:!0,restrict:"AE",replace:"true",template:'<ng-include src="template1"/>',link:function(e,t,a){e.$watch(function(){e.template1="modules/"+e.side})}}}),app.controller("myCtrl",["$scope","$http","$timeout","$filter","$interval","$compile","$window",function(e,t,a,i,o,n,r){function s(t){if(0!=$(".searchLink").length&&(e.listItems=$(".searchLink")),t=t||window.event,"38"==t.keyCode)d<1?(c=Math.floor(e.listItems.length/5),$(".searchResult").animate({scrollTop:300*c},"fast"),d=e.listItems.length-1):(d--,d%4==0&&(d-4<1?($(".searchResult").animate({scrollTop:0},"slow"),c=1):(c--,$(".searchResult").animate({scrollTop:300*c},"slow"))));else if("40"==t.keyCode)d>e.listItems.length-2?(d=0,c=1,$(".searchResult").animate({scrollTop:0},"fast")):(d++,d%5==0&&0!=d&&($(".searchResult").animate({scrollTop:300*c},"slow"),c++));else if("13"==t.keyCode)for(var a=0;a<e.listItems.length;a++)if($(e.listItems[a]).hasClass("selected"))for(var a=0;a<e.system.length;a++)$(e.listItems[a]).attr("value")==e.system[a].title&&e.gettingSystem(e.system[a].id,1);$(".searchLink").removeClass("selected"),$(e.listItems[d]).addClass("selected")}e.host=$(location).attr("pathname")+"/api",e.tableView=!0,e.minimizedFolder=[],e.host.indexOf(1),e.host.toLowerCase(),e.host=e.host.split("/")[1];var l="/"+e.host+"/api";e.subSystemcontainer=[],e.securityCheck=!1,void 0==localStorage.accessToken?(window.location.href="login.html",e.securityCheck=!1):e.securityCheck=!0,o(function(){void 0==localStorage.accessToken&&(window.location.href="login.html",e.securityCheck=!1)},500),t.get("data/theme.json").then(function(t){e.testfont=t.data.testfont,e.tableFont=t.data.tableFont,e.numberType=t.data.numberType,e.time=t.data.screensaver,e.name=t.data.name,e.img=t.data.img,e.gendar=t.data.gendar,e.userColor=t.data.userColor,e.userSubColor=t.data.userSubColor,e.userSystemColor=t.data.userSystemColor,void 0!=localStorage.userColor&&(e.userColor=localStorage.userColor,e.userSubColor=localStorage.userSubColor,e.userSystemColor=localStorage.userSystemColor),void 0!=localStorage.font&&(e.testfont=JSON.parse(localStorage.font));var a;$(document).on("mousemove keydown click",function(){$(".loading-login1").fadeOut(1e3),clearTimeout(a),a=setTimeout(function(){$(".loading-login1").fadeIn(1e3)},60*e.time)}).click()}).catch(function(){e.error[0]="خطا در برقراری ارتباطات",$("#error").modal()}),e.logout=function(){window.localStorage.removeItem("accessToken"),window.location.href="login.html"},e.themeEleman=1,e.themeElemanChange=function(t){e.themeEleman=t},t.get("data/document.json").then(function(t){var a=0,i=0;e.document=t.data.document;for(var o=0;o<e.document.length;o++)a+=e.document[o].debt,i+=e.document[o].credit,e.document[o].credit=e.numberFormat(e.document[o].credit.toString())+"/"+e.float(e.document[o].credit),e.document[o].debt=e.numberFormat(e.document[o].debt.toString())+"/"+e.float(e.document[o].debt);$("#documentDebt").html(e.numberFormat(a.toString())+"/"+e.float(a)),$("#documentCredit").html(e.numberFormat(i.toString())+"/"+e.float(i))}),e.number="modules/example1.html",e.limitedNote=[],e.reading=0,t.get("data/error.json").then(function(t){e.error=t.data.error}),e.calendarsubmit=function(t,a,i){var o={title:"",start:"",end:""};o.title=i,o.start=$("#start1").val(),o.finish=$("#finish1").val(),e.events.push(o),localStorage.setItem("event",JSON.stringify(e.events))},e.lookupFlag=!1,e.lookUping=function(){$("#producer-type").toggleClass("hide")},e.producers=[],e.producerCheck=function(t,a){if($("#producer"+a).is(":checked"))e.producers.push(e.sendMails[t]);else for(var i=0;i<e.producers.length;i++)a==e.producers[i].id&&e.producers.splice(i,1)},e.removingProducer=function(t,a){e.producers.splice(t,1),$("#producer"+a).attr("checked",!1)},t.get("data/cartable.json").then(function(t){e.reciveMails=t.data.cartable,e.cartable=e.reciveMails;for(var a=0;a<e.cartable.length;a++)0==e.cartable[a].read?e.reading=e.reading+1:$("check"+e.cartable[a].id).removeClass("hide");0==e.reading&&$(".badge").css("opacity","0")}),e.send=function(){t.get("data/sendmail.json").then(function(t){e.sendMails=t.data.cartable,e.cartable=e.sendMails,e.emailLoader=!1,e.emailType="sent"})},e.recive=function(t){e.cartable=e.reciveMails,e.emailLoader=!1,e.myFav=t,e.emailType="recive"},e.showContext=function(){e.emailLoader=!1},e.closingSearch=function(){$("#search").hasClass("flag")||(e.searchSystem=[])},e.searching=function(t){$("#search").val()?(e.searchSystem=e.system,$(".searchResult").css({display:"block","background-color":"#f1f2f3"}),e.searchItem=$("#search").val()):(e.searchSystem=[],d=0)},document.onkeydown=s;var d=0,c=1;e.listItems=[],e.checkingP=function(){$(".searchResult").css("overflow-y","scroll"),e.listItems=$(".searchLink"),e.testing=$(".testing"),$(e.listItems[0]).addClass("selected"),e.theme()},e.systemToShow=function(){e.systemIdToLoad=localStorage.getItem("parent_id");t({url:l+"/system/"+e.systemIdToLoad+"/subsystems",method:"GET",dataType:"json",ContentType:"application/x-www-form-urlencoded",headers:p,eventHandlers:{progress:function(t){if(t.lengthComputable){e.progressBar=t.loaded/t.total*100,e.progressCounter=e.progressBar,$("#myBar").css("top","20%"),$("#loadingImage").removeClass("rotate"),$("#myBar").fadeIn();document.getElementById("inside-progress");e.myinterval=o(function(){var t=document.getElementById("inside-progress");e.progressCounter>=100?(o.cancel(e.myinterval),$("#loadingImage").addClass("rotate"),t.style.height=e.progressCounter+"%",t.style.top=100-e.progressCounter+"%",$("#myBar").animate({top:"-20%"}),$("#myBar").fadeOut()):(t.style.height=e.progressCounter+"%",t.style.top=100-e.progressCounter+"%")},20)}}}}).then(function(t){e.subsystem=t.data;for(var a=0;a<e.subsystem.length;a++){var i={id:e.subsystem[a].id,itemLoaded:0,title:e.subsystem[a].title,children:1};e.subsystem[a].isLoaded=!0,e.subSystemcontainer.push(e.subsystem[a]),e.subSystemSituation.push(i)}}).catch(function(t,a,i){console.log(t),f&&401===t.status&&e.refreshlocal(e.systemToShow,0)})},e.header=[],e.childrenLoader=function(a,i,o,n){var r={title:n,id:i};e.header.push(r),e.subsystem=[];for(var s=0;s<e.subSystemcontainer.length;s++)e.subSystemcontainer[s].parentId==i&&e.subsystem.push(e.subSystemcontainer[s]);0==e.subsystem.length&&(0==o?t({url:l+"/system/"+i+"/subsystems",method:"GET",headers:p}).then(function(t){e.subsystem=t.data;for(var a=0;a<e.subsystem.length;a++)e.subSystemcontainer.push(e.subsystem[a])}).catch(function(e,t,a){f&&401===e.status}):t({url:l+"/system/"+i+"/pages",method:"GET",headers:p}).then(function(t){e.subsystem=[],e.leaf=t.data;for(var a=0;a<e.leaf.length;a++)e.subSystemcontainer.push(e.leaf[a])}).catch(function(t,a,i){f&&401===t.status&&e.refreshlocal(e.drop,x)}))},e.topNav=function(t,a){if(a+1!=e.header.length){e.subsystem=[],e.leaf=[];for(var i=0;i<e.subSystemcontainer.length;i++)e.subSystemcontainer[i].parentId==t&&e.subsystem.push(e.subSystemcontainer[i]);e.header=e.header.slice(0,a+1)}},e.gettingMainSystems=function(){$(".system-container").toggleClass("hide")},e.note=[],void 0!=localStorage.note&&(e.note=JSON.parse(localStorage.note));var m,g;t.get("data/note.json").then(function(t){e.message=t.data.message,e.alarm=t.data.alarm,e.sliderAlarm=e.alarm[0],g=e.alarm.length,e.carousel()}),e.myslider=0,e.carousel=function(){e.myslider>e.alarm.length-2?e.myslider=0:e.myslider<0?e.slider=e.alarm.length-1:e.myslider=e.myslider+1,e.sliderAlarm=e.alarm[e.myslider],m=a(function(){e.sliderAlarm=[],e.carousel()},5e3)},e.slider=function(t){t==-1&&(e.myslider=e.myslider-2),a.cancel(m),e.carousel(),$(".play").addClass("hide"),$(".pause").removeClass("hide")},e.pause=function(){a.cancel(m),$(".pause").addClass("hide"),$(".play").removeClass("hide")},e.play=function(){e.carousel(),$(".play").addClass("hide"),$(".pause").removeClass("hide")};var u=!1,h=localStorage.getItem("accessToken"),f=localStorage.getItem("refreshToken"),p={};h&&(p.Authorization="Bearer "+h);e.gettingSystemJson=function(){t({url:l+"/system",method:"GET",headers:p}).then(function(t){var a=localStorage.getItem("parent_id");u=!0,e.system=t.data;for(var i=0;i<e.system.length;i++)e.system[i].id==a&&(e.firstsystem=e.system[i]);e.blankSystem=e.system.length%3,e.facebookLoader=1}).catch(function(t,a,i){f&&401===t.status&&e.refreshlocal(e.gettingSystemJson,0)})},e.refreshlocal=function(t,a){function i(e){localStorage.setItem("accessToken",e.access_token),localStorage.setItem("refreshToken",e.refresh_token),f=localStorage.getItem("refreshToken"),h=localStorage.getItem("accessToken"),p.Authorization="Bearer "+h,0==a?t():t(a)}function o(e,t){}$.ajax({url:"/"+e.host+"/login",data:{refresh_token:f,grant_type:"refresh_token"},type:"POST",dataType:"json",ContentType:"application/x-www-form-urlencoded",success:i,error:o})},e.getHeight=function(){1==u&&setTimeout(function(){$("#chart1").css("height",$(".system-con").height()-28+"px"),t.get("data/chart.json").then(function(e){var t=e.data,a={labels:t.map(function(e){return e.name}),series:t.map(function(e){return e.value})};new Chartist.Bar("#chart1",a,{distributeSeries:!0})})},400)},e.delete=function(){$("#select").is(":checked")?e.cartable=[]:$(".cartable-input").each(function(t){if(1==this.checked)for(var a=this.value,i=0;i<e.cartable.length;i++)a==e.cartable[i].id&&e.cartable.splice(i,1)})},e.tableDeleting=function(){$(".modal_input").each(function(t){if(1==this.checked)for(var a=this.value,i=0;i<e.tabledata.length;i++)a==e.tabledata[i].id&&e.tabledata.splice(i,1)}),e.uncheck(),e.tableFormat(),e.pagination(b)},e.tablePlus=function(t,a,i,o){var n={title:t,description:a,credit:i,debt:o,decimal:1,row:200,situation:"",remain:"",id:t,decimal:1};$("#tablePlus").modal(),e.tabledata.push(n);var r;e.paginationNumber=[],r=Math.ceil(e.tabledata.length/15);for(var s=1;s<r+1;s++)e.paginationNumber.push(s);e.pagination(b)};var v;e.tableEdit=function(){$(".editConfirm").css("display","inline-block"),$(".modal_input").each(function(e){1==this.checked&&(v=this.value,$("#row"+v).attr("contentEditable","true"),$("#row"+v).find("td").addClass("editTable"))}),e.uncheck()},e.confirmEdit=function(){$(".myrow").attr("contentEditable","false"),$(".myrow").find("td").removeClass("editTable"),$(".modal_input").prop("checked",!1),$(".editConfirm").css("display","none"),e.uncheck()},e.cancelEdit=function(){e.tableFormat(),e.pagination(b),$(".myrow").attr("contentEditable","false"),$(".myrow").find("td").removeClass("editTable"),$(".modal_input").prop("checked",!1),$(".editConfirm").css("display","none"),e.uncheck()},e.uncheck=function(){$(".select").prop("checked",!1)},e.subTableFlash=function(t){var a=0;switch($(".modal_input").each(function(e){1==this.checked&&(a+=1)}),a){case 0:e.error[0]="ابتدا ردیفی را انتخاب کنید",$("#error").modal();break;case 1:e.subTable(t);break;default:e.error[0]="ردیف انتخابی نمیتواند بیشتر از یک مورد باشد",$("#error").modal()}},e.subTable=function(t){$(".modal_input").each(function(t){1==this.checked&&(e.subTableId=this.value)}),e.dataToShow=[];for(var a=0;a<e.limitedEdition.length;a++)if(e.subTableId==e.limitedEdition[a].id){e.dataToShow=e.limitedEdition[a].children;break}e.limitedEdition=e.dataToShow,e.tableFormat()},e.inboxing=function(){1==$(".select").prop("checked")?$(".modal_input").prop("checked",!0):$(".modal_input").prop("checked",!1)},e.systemToLoad=function(e){localStorage.setItem("parent_id",e),window.location.href="portotype.min.html"},e.gettingSystem=function(e,t){localStorage.setItem("parent_id",e),window.location.href="system-page.min.html"},e.topLinking=function(t,a){if("system-page.min.html"==a)e.gettingSystem(t,1);else{var i=window.open(a,"_blank");i.focus()}},e.addThis=function(t,a){var i={title:"",id:"",content:""};i.title=a,i.content=t,i.id="mynote"+e.limitedNote.length+1,$("#notetitle").val(""),$("#notearea").val(""),e.note.push(i),localStorage.setItem("note",JSON.stringify(e.note))},e.removeItem=function(t,a){1==t?e.message.splice(a,1):2==t&&(e.note.splice(a,1),localStorage.setItem("note",JSON.stringify(e.note)))},e.radio=function(t){e.numberType[0]=t},e.tabledata=[],e.dataLoad=function(a){e.paginationNumber=[],e.limitedEdition=[],e.dataToSend=[],$(".buttons").attr("disabled","true"),void 0==a[0]&&(e.error[0]="فرم نمیتواند خالی باشد",$("#error").modal());for(var i=0;i<a.length;i++)e.dataToSend.push(a[i]);e.dataToSend.push($("#pdp").val()),e.dataToSend.push($("#pdp1").val()),t.get("data/table.json").then(function(t){e.loading=!1,e.tabledata=t.data.table,e.pagination(1),$(".editor").css("display","inline-block");var a;e.paginationNumber=[],a=Math.ceil(e.tabledata.length/15);for(var i=1;i<a+1;i++)e.paginationNumber.push(i);$(".buttons").prop("disabled",!1)}).catch(function(){e.error[0]="عدم دستیابی به اطلاعات",$("#error").modal()}),setTimeout(function(){e.loading=!1,$(".buttons").prop("disabled",!1)},10)},e.tableFormat=function(){for(var t=0;t<e.limitedEdition.length;t++)2==e.numberType[0]?(e.limitedEdition[t].credit=e.limitedEdition[t].credit/1e3,e.limitedEdition[t].debt=e.limitedEdition[t].debt/1e3):3==e.numberType[0]&&(e.limitedEdition[t].credit=e.limitedEdition[t].credit/1e6,e.limitedEdition[t].debt=e.limitedEdition[t].debt/1e6),void 0!=e.limitedEdition[t].credit&&void 0!=e.limitedEdition[t].debt&&(Number(e.limitedEdition[t].credit)>Number(e.limitedEdition[t].debt)?(e.limitedEdition[t].remain=Number(e.limitedEdition[t].credit)-Number(e.limitedEdition[t].debt),e.limitedEdition[t].situation="بستانکار"):Number(e.limitedEdition[t].credit)<Number(e.limitedEdition[t].debt)?(e.limitedEdition[t].remain=Number(e.limitedEdition[t].debt)-Number(e.limitedEdition[t].credit),e.limitedEdition[t].situation="بدهکار"):(e.limitedEdition[t].remain=Number(e.limitedEdition[t].debt)-Number(e.limitedEdition[t].credit),e.limitedEdition[t].situation="-"))},e.float=function(e){return(e-Math.floor(e)).toFixed(2).toString().substring(2)};var b;e.pagination=function(t){b=t;var i=0,o=0,n=0;$(".pagination li").removeClass("active"),$("#pagination"+t).addClass("active"),e.limitedEdition=[];var r=15*(t-1);if(r+15<e.tabledata.length){for(var s=0;s<r+15;s++)void 0!=e.tabledata[s].credit&&void 0!=e.tabledata[s].debt&&(i+=e.tabledata[s].credit,o+=e.tabledata[s].debt,e.tabledata[s].decimal=(e.tabledata[s].credit-Math.floor(e.tabledata[s].credit)).toFixed(2));for(var l=0;l<15;l++)e.limitedEdition[l]=e.tabledata[r+l]}else{for(var s=0;s<e.tabledata.length;s++)void 0!=e.tabledata[s].credit&&void 0!=e.tabledata[s].debt&&(i+=e.tabledata[s].credit,o+=e.tabledata[s].debt,e.tabledata[s].decimal=(e.tabledata[s].credit-Math.floor(e.tabledata[s].credit)).toFixed(2));for(var l=0;l<e.tabledata.length-r;l++)e.limitedEdition[l]=e.tabledata[r+l]}a(function(){for(var t=0;t<e.limitedEdition.length;t++)void 0!=e.limitedEdition[t].credit&&void 0!=e.limitedEdition[t].debt&&(e.limitedEdition[t].decimal=(e.limitedEdition[t].credit-Math.floor(e.limitedEdition[t].credit)).toFixed(2),0!=(e.limitedEdition[t].credit-Math.floor(e.limitedEdition[t].credit)).toFixed(2)?$("#credit"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].credit.toString())+"/"+e.float(e.limitedEdition[t].credit)):$("#credit"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].credit.toString())),0!=(e.limitedEdition[t].debt-Math.floor(e.limitedEdition[t].debt)).toFixed(2)?$("#debt"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].debt.toString())+"/"+e.float(e.limitedEdition[t].debt)):$("#debt"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].debt.toString())),0!=(e.limitedEdition[t].remain-Math.floor(e.limitedEdition[t].remain)).toFixed(2)?$("#remain"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].remain.toString())+"/"+e.float(e.limitedEdition[t].remain)):$("#remain"+e.limitedEdition[t].id).html(e.numberFormat(e.limitedEdition[t].remain.toString())),"بستانکار"==e.limitedEdition[t].situation||"-"==e.limitedEdition[t].situation?$("#remain"+e.limitedEdition[t].id).addClass("green"):$("#remain"+e.limitedEdition[t].id).addClass("red"));e.theme()},0),i>o?($("#totalSituation").html("بستانکار"),n=i-o,$("#totalSum").addClass("green")):($("#totalSituation").html("بدهکار"),n=o-i,$("#totalSum").addClass("red")),i=e.numberFormat(i.toString())+"/"+e.float(i),o=e.numberFormat(o.toString())+"/"+e.float(o),n=e.numberFormat(n.toString())+"/"+e.float(n),$("#creditSum").html(i),$("#debtSum").html(o),$("#totalSum").html(n),e.tableFormat()},e.users=function(){var a={Pn:1,Ps:e.pagelength,Orders:[{Col:"Id",Asc:!0}]};t({url:l+"/user",method:"POST",ContentType:"application/x-www-form-urlencoded",data:a,dataType:"json",headers:p}).then(function(t){e.limitedEdition=t.data,e.editingLength=0,e.editingUserData=e.limitedEdition[e.editingLength];var a;e.paginationNumber=[],e.rowsCount=e.limitedEdition[0].rowsCount,a=Math.ceil(e.rowsCount/e.pagelength);for(var i=1;i<a+1;i++)e.paginationNumber.push(i);e.paginationToShow(1)}).catch(function(t,a,i){console.log(t),f&&401===t.status&&e.refreshlocal(e.users,0)}),setTimeout(function(){$("#userpagination1").addClass("active")},400)},e.firstStep=0,e.detector=function(t){var a=window.event?event:t;if(13==a.keyCode&&$(".paginationOrder").is(":focus")){var i=$(".paginationOrder").val();e.finalPagination(i,!1,e.urlToGet)}(t.altKey||a.altKey)&&(38==t.keyCode&&(e.editingLength>0?e.editingLength--:e.editingLength=e.limitedEdition.length-1,e.editingUserData=e.limitedEdition[e.editingLength],$(".user").css("background-color","#FFFFFF"),$("#user"+e.editingUserData.id).css("background-color","rgb(255,255,153)")),40==t.keyCode&&(0!=e.firstStep&&e.editingLength<e.limitedEdition.length-1?e.editingLength++:(e.editingLength=0,e.firstStep=e.firstStep+1),e.editingUserData=e.limitedEdition[e.editingLength],$(".user").css("background-color","#FFFFFF"),$("#user"+e.editingUserData.id).css("background-color","rgb(255,255,153)")),13==t.keyCode&&$("#tableEdit").modal(),61==t.keyCode&&$("#tablePlusUser").modal(),190==t.keyCode&&e.editUserSlide(-1),188!=t.keyCode&&60!=t.keyCode||e.editUserSlide(1)),39==t.keyCode&&e.finalPagination(e.currentPage-1,!1,e.urlToGet),37==t.keyCode&&e.finalPagination(e.currentPage+1,!1,e.urlToGet),27==t.keyCode&&($(".modal").modal("hide"),$("#myFocus").focus())},e.currentPage=1,e.pagelength=5,e.search=[],e.simpleSearch=[],e.searchingresult=!1,e.searchToSend=[],e.gettingOrgChart=function(a){console.log(a);var i={Pn:1,Ps:e.pagelength,Orders:[{Col:"Id",Asc:!0}]};t({url:l+a,method:"POST",ContentType:"application/json; charset = utf-8",data:JSON.stringify(i),dataType:"JSON",headers:p}).then(function(t){$("#error-message").html(""),console.log(t.data),e.searchingresult=!1,e.limitedEdition=t.data,e.toshowEdit=e.limitedEdition[0],e.currentPage=1,e.editingLength=0,e.editingUserData=e.limitedEdition[e.editingLength];var a;e.paginationNumber=[],e.rowsCount=e.limitedEdition[0].rowsCount,a=Math.ceil(e.rowsCount/e.pagelength);for(var i=1;i<a+1;i++)e.paginationNumber.push(i);e.paginationToShow(1)}).catch(function(e){console.log("Error"),console.log(e)})},e.tableSearch=function(a){for(var i=0;i<a.length;i++)void 0==a[i].Operation&&(a[i].Operation="Contain"),null!=a[i].Value&&void 0!=a[i].Value&&""!=a[i].Value&&e.searchToSend.push(a[i]);var o={Pn:1,Ps:e.pagelength,Orders:[{Col:"Id",Asc:!0}],WhereClauses:e.searchToSend};console.log(e.searchToSend),t({url:l+e.urlToGet,method:"POST",ContentType:"application/json; charset = utf-8",data:JSON.stringify(o),dataType:"JSON",headers:p}).then(function(t){e.limitedEdition=t.data,e.toshowEdit=e.limitedEdition[0],e.currentPage=1,e.editingLength=0,e.editingUserData=e.limitedEdition[e.editingLength];var a;e.paginationNumber=[],e.rowsCount=e.limitedEdition[0].rowsCount,a=Math.ceil(e.rowsCount/e.pagelength);for(var i=1;i<a+1;i++)e.paginationNumber.push(i);e.paginationToShow(1),e.searchToKeep=e.searchToSend,e.searchToSend=[],e.searchingresult=!0}).catch(function(t){e.searchToSend=[],404==t.status&&$("#error-message").html("موردی با این مشخصات پیدا نشد"),console.log("Error"),console.log(t)})},e.paginationRow=function(t){e.pagelength=t,e.currentPage=1,$(".pagination li").removeClass("active"),e.paginationToShow(1),e.searchingresult?e.tableSearch():e.gettingOrgChart(e.urlToGet)},e.searchPagination=function(a){var i={Pn:a,Ps:e.pagelength,Orders:[{Col:"Id",Asc:!0}],WhereClauses:e.searchToKeep};t({url:l+e.urlToGet,method:"POST",ContentType:"application/json; charset = utf-8",data:JSON.stringify(i),dataType:"JSON",headers:p}).then(function(t){console.log(t.data),e.limitedEdition=t.data,e.toshowEdit=e.limitedEdition[0],e.currentPage=a,e.searchingresult=!0,$(".paginationOrder").val(""),setTimeout(function(){$(".user").css("background-color","#FFFFFF"),$("#user"+e.editingUserData.id).css("background-color","rgb(255,255,125)")},100)}).catch(function(e){404==e.status&&alert("موردی با این مشخصات پیدا نشد"),console.log("Error"),console.log(e)})},e.finalPagination=function(a,i,o){if(e.searchingresult)e.searchPagination(a);else if(o=l+o,a>0&&a<e.paginationNumber.length+1){e.firstStep=0,$(".pagination li").removeClass("active"),$("#userpagination"+a).addClass("active");var n={Pn:a,Ps:e.pagelength,Orders:[{Col:"Id",Asc:!0}]};t({url:o,method:"POST",ContentType:"application/x-www-form-urlencoded",data:n,dataType:"json",headers:p}).then(function(t){e.limitedEdition=t.data,e.currentPage=a,0!=i&&(1==i?e.editingLength=0:i==-1&&(e.editingLength=e.limitedEdition.length-1),e.editingUserData=e.limitedEdition[e.editingLength],setTimeout(function(){$(".user").css("background-color","#FFFFFF"),$("#user"+e.editingUserData.id).css("background-color","rgb(255,255,125)")},100)),$(".paginationOrder").val("")}).catch(function(t,i,o){f&&401===t.status&&e.refreshlocal(e.finalPagination,a)}),e.paginationToShow(a)}},e.pageToGo=!1,e.findPage=function(t){0==e.pageToGo?($("#pageLink").animate({width:"160px"}),$("#pageSpan").css("float","left"),e.pageToGo=!0):($("#pageLink").animate({width:"39px"}),e.pageToGo=!1,$("#pageSpan").css("float","none"),0!=t&&e.finalPagination(t,!1,e.urlToGet))},e.sharingForm=function(){},e.maxWindow=function(){$("#loadedPage").toggleClass("max-window"),$("#loadedPage").hasClass("max-window")?$("#min-window-right").css("z-index","-1"):$("#min-window-right").css("z-index","0")},e.minWindow=function(){for(var t=0,a={pageId:e.currentPageId,value:e.currentValue,id:e.currentId},i=0;i<e.minimizedFolder.length;i++)e.currentId==e.minimizedFolder[i].id&&(t+=1);setTimeout(function(){e.minimizedFolder.length<4&&0==t&&e.minimizedFolder.unshift(a)},250),e.showContext(),$(".min-anime").css("display","block"),$(".min-anime").delay(250).fadeOut(),e.number="modules/unload.html"},e.closeMin=function(t,a){for(var i=0;i<e.minimizedFolder.length;i++)t==e.minimizedFolder[i].id&&(1==a&&e.cartableReader(e.minimizedFolder[i].id,e.minimizedFolder[i].value,e.minimizedFolder[i].pageId),e.minimizedFolder.splice(i,1))},e.finalBranch=[],e.reportTableRow=[],e.reportTable=[],e.mydrag=function(e,t){},e.makingTableReport=function(t,a){for(var i=!1,o=0;o<e.tree.length;o++)if(e.tree[o].id==t){for(var n=0;n<e.reportTable.length;n++)if(e.reportTable[n].id==t)var i=!0;0==i&&e.reportTable.push(e.tree[o])}},e.myDrop=function(t,a,i){for(var o=!1,n=0;n<e.tree.length;n++)if(e.tree[n].id==t){for(var r=0;r<e.finalBranch.length;r++)if(e.finalBranch[r].id==t)var o=!0;0==o&&e.finalBranch.push(e.tree[n])}},e.creatReportTitle=function(t){void 0==t?alert("عنوان گزارش نمیتواند خالی باشد"):(e.reportTitle=t,e.reportTitling=!0)},e.makingTableRow=function(t,a,i){for(var o={name:"",id:""},n=[],r=0;r<e.tree.length;r++)e.tree[r].id==t&&(o.name=e.tree[r].name,o.id=e.tree[r].id);void 0==e.reportTable[i].row?(n[0]=o,e.reportTable[i].row=n):e.reportTable[i].row.push(o)},e.editSubmit=function(a){void 0!=a&&(void 0!=a.name&&(e.editingUserData.personnel.name=a.name),void 0!=a.family&&(e.editingUserData.personnel.family=a.family),void 0!=a.fatherName&&(e.editingUserData.personnel.fatherName=a.fatherName),void 0!=a.birthCertificateNo&&(e.editingUserData.personnel.birthCertificateNo=a.birthCertificateNo),void 0!=a.nationalCode&&(e.editingUserData.personnel.nationalCode=a.nationalCode[0]+a.nationalCode[1]+a.nationalCode[2]+a.nationalCode[4]+a.nationalCode[5]+a.nationalCode[6]+a.nationalCode[7]+a.nationalCode[8]+a.nationalCode[9]+a.nationalCode[11]),void 0!=a.personnelCode&&(e.editingUserData.personnel.code=a.personnelCode),void 0!=a.phone&&(e.editingUserData.user.MobileNo=a.phone),void 0!=a.email&&(e.editingUserData.user.email=a.email),void 0!=a.passwordHash&&(e.editingUserData.user.passwordHash=a.passwordHash),void 0!=a.isActive&&(e.editingUserData.user.isActive=a.isActive));var i={User:e.editingUserData.user,Personnel:e.editingUserData.personnel};console.log(i),t({url:l+"/user/Update/UserPersonnel",method:"POST",ContentType:"application/json; charset = utf-8",data:JSON.stringify(i),dataType:"json",headers:p}).then(function(e){$("#editMessage").html("تغییرات با موفقیت ثبت شد"),$("#myFocus").focus()}).catch(function(t){console.log(t),f&&401===t.status&&e.refreshlocal(e.editSubmit,a),$("#editMessage").html(t.data)})},e.editUser=function(t,a){$("#editMessage").html(" "),$(".user").css("background-color","#FFFFFF"),$("#user"+t).css("background-color","rgb(255,255,153)"),e.editingUserData=e.limitedEdition[a],e.editingLength=a,e.firstStep=1,$("#myFocus").focus()};var b=1;e.editUserSlide=function(t){if(1==t){if(e.editingLength+2>e.limitedEdition.length)return b+1>e.paginationNumber[e.paginationNumber.length-1]?void e.finalPagination(1,1,e.urlToGet):(e.finalPagination(e.currentPage+1,1,e.urlToGet),void(e.editingLength=0));e.editingLength=e.editingLength+1,e.firstStep=1}else{if(e.editingLength-1<0)return e.finalPagination(e.currentPage-1,-1,e.urlToGet),void(e.editingLength=e.limitedEdition.length);e.editingLength=e.editingLength-1,e.firstStep=1}e.editingUserData=e.limitedEdition[e.editingLength],$("#editMessage").html(" "),$(".user").css("background-color","#FFFFFF"),$("#user"+e.editingUserData.id).css("background-color","rgb(255,255,125)")},e.socialNoFormat=function(e){var t=e.split(".",3),a=(parseInt(t),new String(t)),i=(a.substr(a.length-1),a[0]+a[1]+a[2]+"-"+a[3]+a[4]+a[5]+a[6]+a[7]+a[8]+"-"+a[9]);return i},e.fileSelect=function(t){$("#"+t).click(),e.imgLoading=!0,$("#"+t).change(function(t){e.readURL(this),$("#myimg").css("display","block")})},e.readURL=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#myimg").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}},e.searchFormToggle=function(){$("#search-part").slideUp(),$("#search-form").slideToggle(),e.searchFlag=!1},e.fileList=[],e.ImageProperty={file:""},e.registerUser=function(a,i){for(var n=$("#plusPhoto")[0].files,r=0;r<n.length;r++)e.ImageProperty.file=n[r],e.fileList.push(e.ImageProperty),e.ImageProperty={};var s=!1;$("#registerAlarm").html(" "),$("#social-no").css("border","1px solid #ccc");var d=a.nationalCode,c=10*Number(d[0])+9*Number(d[1])+8*Number(d[2])+7*Number(d[4])+6*Number(d[5])+5*Number(d[6])+4*Number(d[7])+3*Number(d[8])+2*Number(d[9]),m=c%11;s=m<2?m==d[11]||11-m==Number(d[11]):11-m==Number(d[11]);var g={Name:a.name,Family:a.family,FatherName:a.fatherName,Code:a.personnelCode,NationalCode:d[0]+d[1]+d[2]+d[4]+d[5]+d[6]+d[7]+d[8]+d[9]+d[11],BirthCertificateNo:a.birthCertificateNo,Gender:a.gender},u={Email:a.mail,Name:a.userName,PasswordHash:a.passwordHash,MobileNo:a.mobileNo,IsActive:a.isActive},h={User:u,Personnel:g};h=JSON.stringify(h),t({url:l+"/user/Create/UserPersonnel",method:"POST",ContentType:"application/json; charset = utf-8",data:h,dataType:"json",headers:p,eventHandlers:{progress:function(t){if(t.lengthComputable){e.progressBar=t.loaded/t.total*100,e.progressCounter=e.progressBar,$("#myBar").css("top","20%"),$("#loadingImage").removeClass("rotate"),$("#myBar").fadeIn();document.getElementById("inside-progress");e.myinterval=o(function(){var t=document.getElementById("myBar");e.progressCounter>=100?(o.cancel(e.myinterval),$("#loadingImage").addClass("rotate"),$("#myBar").delay(500).animate({top:"-20%"}),$("#myBar").delay(1e3).fadeOut()):(t.style.height=e.progressCounter+"%",t.style.top=100-e.progressCounter+"%")},20)}}}}).then(function(t){e.paginationNumber=[],e.rowsCount++,pageNumber=Math.ceil(e.rowsCount/e.pagelength);for(var i=1;i<pageNumber+1;i++)e.paginationNumber.push(i);1==a.close?($("#tablePlusUser").modal("toggle"),$("#focusPlace").focus(),e.responseAlarm("ثبت کاربران با موفقیت انجام شد")):($(".form-control").val(""),$("#name").focus()),e.imgLoading=!1}).catch(function(t,i,o){console.log(t),f&&401===t.status&&e.refreshlocal(e.registerUser,a),$("#registerAlarm").html(t.data)}),e.paginationToShow(b)},e.responseAlarm=function(t){e.responeMessage=t,$("#response").fadeIn(),$("#response").delay(3e3).fadeOut()},e.paginationSlide=function(t){t==-1&&1!=b&&(b-=1,e.paginationToShow(b))},e.paginationToShow=function(t){if("last"==t&&(t=e.paginationNumber.length),e.pages=[],t>3)if(t+2>e.paginationNumber.length)for(var a=-5;a<0;a++)e.pages.push(e.paginationNumber[e.paginationNumber.length+a]);else for(var a=-3;a<2;a++)e.pages.push(e.paginationNumber[t+a]);else if(e.paginationNumber.length>5)for(var a=0;a<5;a++)e.pages.push(e.paginationNumber[a]);else for(var a=0;a<e.paginationNumber.length;a++)e.pages.push(e.paginationNumber[a])},e.numberFormat=function(e){var t=",",a=e.split(".",2),i=a,o=parseInt(a[0]);if(isNaN(o))return"";var n="";o<0&&(n="-"),o=Math.abs(o);for(var r=new String(o),a=[];r.length>3;){var s=r.substr(r.length-3);a.unshift(s),r=r.substr(0,r.length-3)}return r.length>0&&a.unshift(r),r=a.join(t),e=i.length<1?r:r,e=n+e};var y=0;e.checking=function(a){if(46===a.which&&(t.get("data/modal.json").then(function(t){e.first=t.data.first}).catch(function(){e.error[0]="عدم برقراری ارتباطات مجددا سعی کنید",$("#error").modal()}),$("#myModal").modal("toggle")),43===a.which){if(0==y)return t.get("data/modal.json").then(function(t){e.first=t.data.second}).catch(function(){e.error[0]="عدم برقراری ارتباطات مجددا سعی کنید",$("#error").modal()}),void(y+=1);1==y&&(t.get("data/modal.json").then(function(t){e.first=t.data.third}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),y+=1)}if(45==a.which){if(1==y)return t.get("data/modal.json").then(function(t){
e.first=t.data.first}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),void(y-=1);if(2==y)return t.get("data/modal.json").then(function(t){e.first=t.data.second}).catch(function(){e.error[0]="خطا در دستیابی به اطلاعات",$("#error").modal()}),void(y-=1)}},e.eventNumber=0,e.events=[],void 0!=localStorage.event&&(e.events=JSON.parse(localStorage.event));for(var C=new Date,T=C.getMonth()+1,S=C.getDate(),w=C.getFullYear(),k=(w+"/"+T+"/"+S).toString(),E=0;E<e.events.length;E++)e.events[E].start==k&&(e.eventNumber+=1);e.orderBy=function(t){e.myorder=t},e.subSystemSituation=[],e.drop=function(a){for(var i=0;i<e.subSystemSituation.length;i++)a==e.subSystemSituation[i].id&&0==e.subSystemSituation[i].itemLoaded&&t({url:l+"/system/subsystem",method:"GET",params:{parentId:a},headers:p}).then(function(t){e.itemToPush=t.data;for(var i=0;i<e.subSystemSituation.length;i++)a==e.subSystemSituation[i].id&&0==e.subSystemSituation[i].itemLoaded&&(e.subSystemSituation[i].children=e.itemToPush,e.subSystemSituation[i].children=e.itemToPush)}).catch(function(t,i,o){f&&401===t.status&&e.refreshlocal(e.drop,a)});setTimeout(function(){$("#dropdown"+a).slideToggle()},100)},e.subSystem=function(a,i,o){1==o?t({url:l+"/system/pages",method:"GET",params:{systemId:i},headers:p}).then(function(t){e.mypages=t.data,e.systemslider=[]}).catch(function(t,i,o){f&&401===t.status&&e.refreshlocal(e.drop,a)}):t({url:l+"/system/subsystem",method:"GET",params:{parentId:i},headers:p}).then(function(t){e.systemslider=t.data,e.mypages=[]}).catch(function(t,i,o){f&&401===t.status&&e.refreshlocal(e.drop,a)}),$(".top-slide").slideUp()},e.headerSlide=function(a,i,o,n,r){e.treeToShow=[],e.limitedEdition=[],e.tabledata=[],e.paginationNumber=[],1==n||(t({url:l+"/system/subsystem",method:"GET",params:{parentId:a},headers:p}).then(function(t){for(var i=0;i<e.systemslider.length;i++)a==e.systemslider[i].id&&e.systemslider[i].children.push(t.data)}).catch(function(t,i,o){f&&401===t.status&&e.refreshlocal(e.drop,a)}),$("#"+a).slideToggle()),$("#nav").html(i),$("#subnav").html("")},e.list_slide=function(a,i,o,n){$("#creditSum").html(""),$("#debtSum").html(""),$("#totalSum").html(""),$("#totalSituation").html(""),1==n?e.table(o):t({url:l+"/system/subsystem",method:"GET",params:{parentId:i},headers:p}).then(function(t){for(var a=0;a<e.systemslider.length;a++)for(var i=0;i<e.systemslider[a].children.length;i++)x==e.systemslider[a].children[i].id&&e.systemslider[a].children[i].children.push(t.data)}).catch(function(t,a,i){f&&401===t.status&&e.refreshlocal(e.drop,x)}),$("#"+i).slideToggle()},e.cartableReader=function(t,a,i){e.emailLoader=!0,e.currentPageId=i,e.currentId=t,e.currentValue=a,e.table(a,i);for(var o=0;o<e.reciveMails.length;o++)t==e.reciveMails[o].id&&(0==e.reciveMails[o].read&&(e.reading=e.reading-1),e.reciveMails[o].read=!0)},e.table=function(a,i){e.currentPageId=i,e.currentValue=a,$(".leaf").removeClass("myselect"),$("#leaf"+i).addClass("myselect"),t({url:l+"/system/page/"+i+"/elements",method:"GET",ContentType:"application/x-www-form-urlencoded",dataType:"json",headers:p}).then(function(t){e.permission=t.data,e.currentPage=1,e.number="modules/"+a}).catch(function(t,i){console.log(t),f&&401===t.status||404===t.status&&(e.permission=[],e.currentPage=1,e.number="modules/"+a)})},e.isAuth=function(t,a){for(var i=0;i<e.permission.length;i++)if(e.permission[i].elementName==t)return(e.permission[i].permission&a)==a},e.orgchart=[],e.orgchartDelete=function(){$(".chart-check").each(function(a){if(1==this.checked){var i=this.value;t({url:l+"/orgcharttype/Delete/"+i,method:"POST",ContentType:"application/json; charset = utf-8",dataType:"JSON",headers:p}).then(function(t){for(var a=0;a<e.limitedEdition.length;a++)i==e.limitedEdition[a].id&&e.limitedEdition.splice(a,1),$("#tableDelete").modal("hide")}).catch(function(e,t,a){console.log(e)})}})},e.orgchartUpdate=function(a){void 0==a.name&&(a.name=e.editingUserData.name),void 0==a.chartType&&(a.chartType=e.editingUserData.chartType),void 0==a.assignType&&(a.assignType=e.editingUserData.assignType);var i={name:a.name,chartType:a.chartType,assignType:a.assignType,id:e.editingUserData.id};i=JSON.stringify(i),t({url:l+"/orgcharttype/Update",method:"POST",data:i,ContentType:"application/json; charset = utf-8",dataType:"JSON",headers:p}).then(function(t){e.gettingOrgChart("/orgcharttype/get")}).catch(function(e){console.log(e)})},e.orgChartRegister=function(a){var i={name:a.chartname,chartType:a.charttype,assignType:a.Assigntype};t({url:l+"/orgcharttype/create",method:"POST",data:JSON.stringify(i),ContentType:"application/json; charset = utf-8",dataType:"JSON",headers:p}).then(function(t){e.gettingOrgChart("/orgcharttype/get")}).catch(function(t,a,i){console.log(t),422==t.status&&($("#tablePlus").modal("toggle"),e.error[0]=t.data,$("#error").modal())})},e.urlMaker=function(t){e.urlToGet=t,e.gettingOrgChart(e.urlToGet)},e.myDatePicker=function(){$(".elementClass").persianDatepicker()},e.favCartable=function(t){for(var a=0;a<e.cartable.length;a++)t==e.cartable[a].id&&(0==e.cartable[a].fav?e.cartable[a].fav=!0:e.cartable[a].fav=!1)},e.chatting=function(t){e.newChat={sender:" ",content:"",type:"",reciver:""},void 0==t&&alert("برای آغاز گفتگو یک فرد را باید انتخاب کنید"),e.newChat.content=$("#chattext").val(),e.newChat.reciver=t,e.newChat.type="send",e.chat.push(e.newChat),$("#chattext").val(""),setTimeout(function(){$("#chatarea").scrollTop=$("#chatarea").scrollHeight},100)},e.tableFontSize=14,e.tableSetting=!1,e.tableSetting1=!1,e.tableSettingFunction=function(t){0==t?0==e.tableSetting?e.tableSetting=!0:e.tableSetting=!1:1==t&&(0==e.tableSetting1?e.tableSetting1=!0:e.tableSetting1=!1)},e.secondTable=!1,e.filling=function(e){$("#post-type").val(e)},e.modalPlus=function(t,a,i){0==i?($("#"+t).addClass("table-moving-left"),$("#"+a).css("display","block"),$("#"+a).addClass("table-moving-right"),e.secondTable=!0,setTimeout(function(){$("#"+t).css("display","none"),$("#"+t).removeClass("table-moving-left"),$("#"+a).removeClass("table-moving-right")},1e3)):($("#"+a).addClass("table-moving-right1"),$("#"+t).addClass("table-moving-left1"),$("#"+t).css("display","block"),setTimeout(function(){$("#"+a).removeClass("table-moving-right1"),$("#"+a).css("display","none"),$("#"+t).removeClass("table-moving-left1")},1e3))},e.tablefontChange=function(t){$("#fontRange").val(e.tableFontSize),e.tableFontSize=t,e.tableFont={"font-size":t+"px"}},e.searchToggle=function(){$("#search-part").slideToggle(),$("#search-form").slideUp(),e.searchFlag?e.searchFlag=!1:e.searchFlag=!0},e.fontChanger=function(t){switch($(".fa-check-circle-o").addClass("hide"),t){case"1":e.testfont={"font-family":"samim"},localStorage.setItem("font",JSON.stringify(e.testfont)),$("#firstcheck").removeClass("hide");break;case"2":e.testfont={"font-family":"iran-sans"},localStorage.setItem("font",JSON.stringify(e.testfont)),$("#secondcheck").removeClass("hide");break;case"3":e.testfont={"font-family":"dubai"},localStorage.setItem("font",JSON.stringify(e.testfont)),$("#thirdcheck").removeClass("hide");break;case"4":e.testfont={"font-family":"shabnam"},localStorage.setItem("font",JSON.stringify(e.testfont)),$("#forthcheck").removeClass("hide");break;case"5":e.testfont={"font-family":"sahel"},localStorage.setItem("font",JSON.stringify(e.testfont)),$("#fifthcheck").removeClass("hide")}e.theme()},e.screen=function(t){switch(t){case"یک دقیقه":e.time=1e3;break;case"دو دقیقه":e.time=2e3;break;case"سه دقیقه":e.time=3e3}},e.colorChanger=function(t){switch($(".color-icon").css("display","none"),$("#color"+t).css("display","inline-block"),t){case"1":localStorage.setItem("userColor","first-color"),localStorage.setItem("userSubColor","first-subcolor"),localStorage.setItem("userSystemColor","first-systemcolor"),e.userColor="first-color",e.userSubColor="first-subcolor",e.userSystemColor="first-systemcolor";break;case"2":localStorage.setItem("userColor","second-color"),localStorage.setItem("userSubColor","second-subcolor"),localStorage.setItem("userSystemColor","second-systemcolor"),e.userColor="second-color",e.userSubColor="second-subcolor",e.userSystemColor="second-systemcolor";break;case"3":localStorage.setItem("userColor","third-color"),localStorage.setItem("userSubColor","third-subcolor"),localStorage.setItem("userSystemColor","third-systemcolor"),e.userColor="third-color",e.userSubColor="third-subcolor",e.userSystemColor="third-systemcolor"}},e.sideBar=function(t){$(".side-tool p .fa-close").css("display","block"),e.sidecontainer(t),window.innerWidth>768?$(".side-tool").animate({width:"30%"},"slow"):$(".side-tool").animate({width:"90%"},"slow")},e.side="note2.html",e.sidecontainer=function(a){if(1==a&&(void 0!=localStorage.note&&(e.note=JSON.parse(localStorage.note)),t({method:"GET",url:"data/note.json"}).then(function(t){e.message=t.data.message,e.alarm=t.data.alarm}),e.side="note2.html"),2==a){var i;t.get("data/events.json").then(function(e){$('[data-toggle="tooltip"]').tooltip(),i=e}),e.side="calendar2.html"}3==a&&(t.get("data/link.json").then(function(t){e.link=t.data.link}),e.side="link.html")},e.closingExtraInfo=function(){e.extraInfo=!1},e.sideBarClose=function(){$(".side-tool").animate({width:"0px"}),$(".side-tool p .fa-close").css("display","none"),$(".side-filter").animate({width:"0px"}),$(".container-filter a").css("pointer-events",""),$("nav a").css("pointer-events",""),$("nav i").css("pointer-events",""),$(".effect").css("filter","none")},e.mydate=function(){var t=new Array("يكشنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه","شنبه"),a=new Array("فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دي","بهمن","اسفند"),i=new Date,o=i.getDay(),n=i.getDate(),r=i.getMonth()+1,s=i.getYear();switch(s=0==s?2e3:s,!(s<1e3)||(s+=1900),s-=r<3||3==r&&n<21?622:621,r){case 1:n<21?(r=10,n+=10):(r=11,n-=20);break;case 2:n<20?(r=11,n+=11):(r=12,n-=19);break;case 3:n<21?(r=12,n+=9):(r=1,n-=20);break;case 4:n<21?(r=1,n+=11):(r=2,n-=20);break;case 5:case 6:n<22?(r-=3,n+=10):(r-=2,n-=21);break;case 7:case 8:case 9:n<23?(r-=3,n+=9):(r-=2,n-=22);break;case 10:n<23?(r=7,n+=8):(r=8,n-=22);break;case 11:case 12:n<22?(r-=3,n+=9):(r-=2,n-=21)}e.myday=n,e.myMonth=a[r-1],e.dayname=t[o]},e.newMonth=function(t){12==T&&1==t?T=1:1==T&&t==-1?T=12:T+=t,e.myMonth=months[T-1]},e.treeToShow=[],e.gettingTree=function(){e.treeToShow=[],t.get("data/tree.json").then(function(t){e.tree=t.data.tree;for(var a=0;a<e.tree.length;a++)null==e.tree[a].parent&&e.treeToShow.push(e.tree[a])})},e.nodeSlide=function(t){$("#tree"+t).hasClass("flag")?$("#tree"+t).slideToggle():(e.creatingNode(t),$("#tree"+t).addClass("flag")),$("#treeIcon"+t).toggleClass("flag"),$("#treeIcon"+t).hasClass("flag")?($("#treeIcon"+t).removeClass("fa-folder-o"),$("#treeIcon"+t).addClass("fa-folder-open-o")):($("#treeIcon"+t).removeClass("fa-folder-open-o"),$("#treeIcon"+t).addClass("fa-folder-o"))},e.chartTree=[],e.chartTreeMaker=function(t,a,i){var o,n;n=0==a?"fa-ban":1==a?"fa-user":"fa-users",o=0!=e.chartTree.length?e.chartTree.length*-1:0;var r={name:t,person:a,id:o,parent:i,icon:n};e.chartTree.push(r),e.treeFirstItem=!0,e.chartTreeAppend(i)},e.chartTreeUpdate=function(t,a,i){void 0!=t&&(e.chartTree[i].name=t),"nochange"!=e.fatherToChange&&void 0!=e.fatherToChange&&(e.chartTree[i].parent=e.fatherToChange),0==a?e.chartTree[i].icon="fa-ban":1==a?e.chartTree[i].icon="fa-user":e.chartTree[i].icon="fa-users",e.chartTreeAppend(0),e.fatherChange=!1,$("#drag"+e.fatherToChange).removeClass("redNode"),e.fatherToChange="nochange",$("input").val("")},e.edit="edit",e.update="update",e.testData,e.test1=function(t){e.testData=t},e.chartTreeAppend=function(t){$("#chart-tree-"+t).html("");for(var a=0;a<e.chartTree.length;a++)if(e.chartTree[a].parent==t){$("#chart-tree-"+t).append(n("<div class='chart-tree-view' >                            <div class='formal-chart formal-chart-right-border' >                                <div class='row'  ng-drop='true' ng-drop-success='chartDrop($data,$event,0)'>                                    <div class='col-sm-12 drag' id='drag"+e.chartTree[a].id+"' ng-mouseenter='test1("+a+")' ng-click='selectedFather("+e.chartTree[a].id+")' ng-class='userColor' ng-drag-end='test()' draggable='true' ng-drag-data='"+a+"' ng-drag='true'>                                        <div class='row'>                                            <div class='col-sm-4 left-align'>                                                <i class='fa fa-close pointer' ng-click='chartDelete("+e.chartTree[a].id+")'></i>                                            </div>                                            <div class='col-sm-8 right-align'>                                                <i class='fa fa-pencil pointer' ng-click='showingEdit("+e.chartTree[a].id+","+e.update+")'></i>                                                <i class='fa fa-ellipsis-h pointer' ng-click='showingEdit("+e.chartTree[a].id+","+e.edit+")'></i>                                            </div>                                            <div class='clearfix'></div>                                            <div class='col-sm-4 left-align'>                                                <i class='fa "+e.chartTree[a].icon+"'></i>                                            </div>                                            <div class='co-sm-8 center'>                                                <span class='pointer' data-toggle='collapse' data-target='#chart-tree-"+e.chartTree[a].id+"'>                                                    "+e.chartTree[a].name+"                                                </span>                                            </div>                                        </div>                                    </div>                                    <div class='clearfix'></div>                                </div>                                <div class='formal-chart-edit hide' id='chart-update-"+e.chartTree[a].id+"'>                                    <div class='row'>                                        <div class='col-sm-12 left-align'>                                            <i class='fa fa-close' ng-click=closeEdit("+e.chartTree[a].id+","+e.update+")></i>                                        </div>                                        <div class='col-sm-12 center'>                                            <button class='btn btn-danger' ng-click='chartTreeFather()'>تغییر سردسته</button>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8 my-margin-top'>                                            <input type='text' ng-model='updateName' placeholder='"+e.chartTree[a].name+"' class='form-control' ng-model='itemName'>                                        </div>                                        <div class='col-sm-4 left-align my-margin-top' style='padding: 0'>                                            <label>نام زیر دسته :</label>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8  my-margin-top'>                                            <select ng-model='updatePerson'  style='height: 30px;width: 100% !important;font-size: 12px' ng-model='type'                                                class='form-control my-form' name='kindDocument'>                                                <option value=0  selected>ندارد</option>                                                <option value=1 >تک نفر</option>                                                <option value=2 >چند گانه</option>                                            </select>                                        </div>                                        <div class='col-sm-4 left-align  my-margin-top' style='padding: 0'>                                            <label>انتصاب فرد :</label>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8 my-margin-top left-align'>                                            <button class='btn btn-primary' ng-click='chartTreeUpdate(updateName,updatePerson, "+a+")'>                                                    ثبت تغییرات                                              </button>                                        </div>                                    </div>                                </div>                                <div class='formal-chart-edit hide' id='chart-edit-"+e.chartTree[a].id+"'>                                    <div class='row'>                                        <div class='col-sm-12 left-align'>                                            <i class='fa fa-close' ng-click=closeEdit("+e.chartTree[a].id+","+e.edit+")></i>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8 my-margin-top'>                                            <input type='text' onclick='this.select()' class='form-control'ng-model='itemName'>                                        </div>                                        <div class='col-sm-4 left-align my-margin-top'>                                            <label>نام زیر دسته :</label>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8  my-margin-top'>                                            <select style='height: 30px;width: 100% !important;font-size: 12px' ng-model='person' class='form-control my-form' name='kindDocument'>                                                    <option value=0  selected>ندارد</option>                                                    <option value=1 >تک نفر</option>                                                    <option value=2 >چند گانه</option>                                                </select>                                        </div>                                        <div class='col-sm-4 left-align  my-margin-top'>                                            <label>انتصاب فرد :</label>                                        </div>                                        <div class='clearfix'></div>                                        <div class='col-sm-8 left-align my-margin-top'>                                            <button class='btn btn-primary' ng-click='chartTreeMaker(itemName,person,"+e.chartTree[a].id+")'>                                                    ایجاد زیر دسته                                                </button>                                        </div>                                    </div>                                </div>                            </div>                            <div class='clearfix'></div>                            <div class='chart-tree-border collapse in' id='chart-tree-"+e.chartTree[a].id+"'></div>                        </div>")(e));for(var i=0;i<e.chartTree.length;i++)e.chartTree[i].parent==e.chartTree[a].id&&e.chartTreeAppend(e.chartTree[a].id)}},e.fatherChange=!1,e.chartTreeFather=function(){e.fatherChange=!0},e.selectedFather=function(t){var a=!1;e.fatherChange&&($("#drag"+t).hasClass("redNode")?(a=!0,e.fatherToChange="nochange"):e.fatherToChange=t,1==a?$("#drag"+t).removeClass("redNode"):($(".drag").removeClass("redNode"),$("#drag"+t).addClass("redNode")))},e.showingEdit=function(e,t){$(".formal-chart-"+t).addClass("hide"),$("#chart-"+t+"-"+e).removeClass("hide")},e.closeEdit=function(e,t){$("#chart-"+t+"-"+e).addClass("hide"),$("input").val("")},e.chartDelete=function(t){for(var a,i=0,o=0;o<e.chartTree.length;o++)e.chartTree[o].parent==t&&(i+=1);if(i>0)e.error[0]="شما نمیتوانید سرشاخه را حذف کنید",$("#error").modal();else for(var n=0;n<e.chartTree.length;n++)e.chartTree[n].id==t&&(a=e.chartTree[n].parent,e.chartTree.splice(n,1),e.chartTreeAppend(a))},e.test=function(){},e.chartDrop=function(t,a,i){e.chartTree[e.testData].parent=i,e.chartTreeAppend(0)},e.creatingNode=function(t){$("#tree"+t).html("");for(var a=0;a<e.tree.length;a++)e.tree[a].parent==t&&(0==e.tree[a].leaf?$("#tree"+t).append(n("<div class='tree-view' ><span ng-drag='true' style='margin-right:0px' ng-drag-data='"+e.tree[a].id+"' ng-drag-success='mydrag($data,$event);' class='tree-span fontchange' id='treeRow"+e.tree[a].id+"' style='cursor:grab'>"+e.tree[a].name+"</span><i style='margin-left:-12px' class='fa fa-folder-o pointer' id='treeIcon"+e.tree[a].id+"' ng-click='nodeSlide("+e.tree[a].id+")'></i><div id='tree"+e.tree[a].id+"'></div></div>")(e)):$("#tree"+t).append(n("<div class='tree-view1' ><span ng-drag='true' ng-drag-data='"+e.tree[a].id+"' ng-drag-success='mydrag($data,$event);' class='tree-span fontchange' id='treeRow"+e.tree[a].id+"' style='cursor:grab'>"+e.tree[a].name+"</span></div>")(e)))};var N=0,I=0;e.treeToEdit=[],e.selectingTree=function(t){for(var a=0,i=0;i<e.tree.length;i++)if($("#treeRow"+e.tree[i].id).hasClass("treeBackground")){a+=1;var o=e.tree[i].id}if($(".editingTree").is(":visible")&&0!=a){if(t==o)$("#treeRow"+t).toggleClass("treeBackground");else if($("#treeRow"+t).toggleClass("redNode"),$("#treeRow"+t).hasClass("redNode")){$(".tree-span").removeClass("redNode"),$("#treeRow"+t).addClass("redNode"),I=t;for(var i=0;i<e.tree.length;i++)e.tree[i].id==t&&($(".my-option").prop("selected",!1),$("#option"+e.tree[i].id).prop("selected",!0))}}else if($(".tree-span").removeClass("redNode"),$("#treeRow"+t).toggleClass("treeBackground"),$("#treeRow"+t).hasClass("treeBackground")){$(".tree-span").removeClass("treeBackground"),$("#treeRow"+t).addClass("treeBackground"),N=t;for(var i=0;i<e.tree.length;i++)e.tree[i].id==t&&(e.treeToEdit=[],e.treeToEdit.push(e.tree[i]),$("#treeCode").val(e.tree[i].code),$("#treeName").val(e.tree[i].name),$(".my-option").prop("selected",!1),$("#option"+e.tree[i].parent).prop("selected",!0),$("#plus"+e.tree[i].id).prop("selected",!0),$(".editAlarm").html(" "))}else $(".tree-span").removeClass("treeBackground"),e.treeToEdit=[],$(".editAlarm").html("برای انجام ویرایش ابتدا یک شاخه را انتخاب کنید"),$("#treeCode").val(""),$("#treeName").val("")},e.deletingNode=function(){var t=0;if(0==e.treeToEdit.length)e.error[0]="ابتدا شاخه ایی را انتخاب کنید",$("#error").modal();else{for(var a=0;a<e.tree.length;a++)e.tree[a].parent==e.treeToEdit[0].id&&(t+=1);if(0==t)for(var a=0;a<e.tree.length;a++)e.tree[a].id==e.treeToEdit[0].id&&($("#treeRow"+e.treeToEdit[0].id).remove(),$("#tree"+e.treeToEdit[0].id).remove(),$("#treeIcon"+e.treeToEdit[0].id).removeClass("fa-angle-down"),$("#treeIcon"+e.treeToEdit[0].id).removeClass("fa-angle-up"),e.tree.splice(a,1));else e.error[0]="شما نمیتوانید سرشاخه را حذف کنید",$("#error").modal()}},e.editingNode=function(){$(".tree-span").removeClass("treeBackground"),$(".tree-span").removeClass("redNode"),0==e.treeToEdit.length&&$(".editAlarm").html("برای انجام ویرایش ابتدا یک شاخه را انتخاب کنید"),$(".plusNode").css("display","none"),$(".plusNode").removeClass("flag"),$(".editingTree").toggleClass("flag"),$(".editingTree").hasClass("flag")?$(".editingTree").css("display","inline-block"):$(".editingTree").css("display","none")},e.addingNode=function(){$(".editingTree").css("display","none"),$(".editingTree").removeClass("flag"),$(".plusNode").toggleClass("flag"),$(".plusNode").hasClass("flag")?$(".plusNode").css("display","inline-block"):$(".plusNode").css("display","none")},e.editRegister=function(){if($("#tree"+N).find($("#treeRow"+I)).length>0)e.error[0]="ابتدا زیر شاخه را به سطح بالاتر انتقال دهید",$("#error").modal();else{for(var t=0;t<e.tree.length;t++)if(e.tree[t].id==e.treeToEdit[0].id){e.tree[t].code=$("#treeCode").val(),e.tree[t].name=$("#treeName").val();var a=e.tree[t].parent;void 0!=$("#parent").val()&&(e.tree[t].parent=$("#parent").val(),e.creatingNode($("#parent").val())),void 0!=$("#location").val()&&(e.tree[t].location=$("#location").val())}e.creatingNode(a),e.editingNode(),e.nodeSlide(a),e.nodeSlide($("#parent").val())}},e.addingRegister=function(t,a,i,o){if(void 0==t||void 0==a||void 0==o)e.error[0]="پر کردن همه فیلد ها الزامی است",$("#error").modal();else{var n={name:a,code:t,parent:$("#plusBranch").val(),id:t};e.tree.push(n),e.creatingNode($("#plusBranch").val()),$("#tree"+$("#plusBranch").val()).hasClass("flag")||e.nodeSlide($("#plusBranch").val())}$(".tree-span").removeClass("treeBackground"),$(".plus-form").val("")},e.chartLoad=function(){}}]),table();var is_iPad=null!=navigator.userAgent.match(/iPad/i);appleCheck(),window.onkeydown=function(e){e=e||window.event,45==e.keyCode&&searching()};